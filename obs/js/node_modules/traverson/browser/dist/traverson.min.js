!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).traverson=t()}}(function(){var define,module,exports;return function s(i,a,u){function c(e,t){if(!a[e]){if(!i[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(l)return l(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var o=a[e]={exports:{}};i[e][0].call(o.exports,function(t){return c(i[e][1][t]||t)},o,o.exports,s,i,a,u)}return a[e].exports}for(var l="function"==typeof require&&require,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,e,r){"use strict";var n=!1;function o(t){null==t&&(t=""),this.id=t}function s(t){return new o(t)}o.prototype.enable=function(){this.enabled=!0},o.prototype.debug=function(t){n&&console.log(this.id+"/debug: "+t)},o.prototype.info=function(t){n&&console.log(this.id+"/info: "+t)},o.prototype.warn=function(t){n&&console.log(this.id+"/warn: "+t)},o.prototype.error=function(t){n&&console.log(this.id+"/error: "+t)},s.enable=function(){n=!0},e.exports=s},{}],2:[function(t,e,r){"use strict";e.exports={isArray:function(t){return null!=t&&"[object Array]"===Object.prototype.toString.call(t)}}},{}],3:[function(t,e,r){"use strict";var n=t("superagent");function o(){}function s(t,e){var r,n,o,s,i,a;return r=t,null!=(n=(e=e||{}).qs)&&(r=r.query(n)),o=t,null!=(s=e.headers)&&(o=o.set(s)),i=t,null!=(a=e.auth)&&(i=i.auth(a.user||a.username,a.pass||a.password)),function(t,e){if(null!=e){var r=e.body;null!=r&&(t=t.send(r))}}(t,e),function(t,e){if(null!=e){var r=e.form;null!=r&&(t=(t=t.set("content-type","application/x-www-form-urlencoded")).send(r))}}(t,e),function(t,e){if(null!=e){var r=e.withCredentials;!0===r&&t.withCredentials()}}(t,e),t}function i(t){return t.body=t.text,t.statusCode=t.status,t}function a(r){return function(t,e){if(t){if(!e)return r(t);r(null,i(e))}else r(null,i(e))}}o.prototype.get=function(t,e,r){return s(n.get(t),e).end(a(r))},o.prototype.post=function(t,e,r){return s(n.post(t),e).end(a(r))},o.prototype.put=function(t,e,r){return s(n.put(t),e).end(a(r))},o.prototype.patch=function(t,e,r){return s(n.patch(t),e).end(a(r))},o.prototype.del=function(t,e,r){return s(n.del(t),e).end(a(r))},e.exports=new o},{superagent:45}],4:[function(t,e,r){"use strict";var s={startsWith:function(t,e){return""===e||null!=t&&null!=e&&(t=String(t),e=String(e),t.length>=e.length&&t.slice(0,e.length)===e)},endsWith:function(t,e){return""===e||null!=t&&null!=e&&(t=String(t),e=String(e),t.length>=e.length&&t.slice(t.length-e.length)===e)},splice:function(t,e,r,n){var o=s.chars(t);return o.splice(~~e,~~r,n),o.join("")},contains:function(t,e){return""===e||null!=t&&-1!==String(t).indexOf(e)},chars:function(t){return null==t?[]:String(t).split("")}};e.exports=s},{}],5:[function(t,e,r){"use strict";var n=t("resolve-url");r.resolve=function(t,e){return n(t,e)}},{"resolve-url":43}],6:[function(t,e,r){"use strict";var n=t("minilog"),o=t("./errors"),s=o.errors,i=o.createError,a=n("traverson");r.abortTraversal=function(){a.debug("aborting link traversal"),this.aborted=!0,this.currentRequest&&(a.debug("request in progress. trying to abort it, too."),this.currentRequest.abort())},r.registerAbortListener=function(t,e){t.currentRequest&&t.currentRequest.on("abort",function(){r.callCallbackOnAbort(t)})},r.callCallbackOnAbort=function(t){a.debug("link traversal aborted"),t.callbackHasBeenCalledAfterAbort||(t.callbackHasBeenCalledAfterAbort=!0,t.callback(r.abortError(),t))},r.abortError=function(){var t=i("Link traversal process has been aborted.",s.TraversalAbortedError);return t.aborted=!0,t}},{"./errors":9,minilog:1}],7:[function(t,e,r){"use strict";t("minilog")("traverson"),t("./abort_traversal"),t("./transforms/apply_transforms"),t("./http_requests"),t("./is_continuation");var s=t("./walker"),i=t("./transforms/check_http_status"),n=t("./transforms/continuation_to_doc"),o=t("./transforms/continuation_to_response"),a=t("./transforms/convert_embedded_doc_to_response"),u=t("./transforms/extract_doc"),c=t("./transforms/extract_response"),l=t("./transforms/extract_url"),p=t("./transforms/fetch_last_resource"),h=t("./transforms/execute_last_http_request"),f=t("./transforms/execute_last_http_request_for_convert_response"),d=t("./transforms/parse"),y=t("./transforms/parse_link_header");function v(t,e,r,n){var o;o=t.convertResponseToObject?[f,i,d,y,u]:[h],t.lastMethod=r,s.walk(t,o,n)}function g(t){return{abort:t.abortTraversal}}r.get=function(t,e){var r;return t.lastMethodName="GET",r=t.convertResponseToObject?[n,p,i,d,y,u]:[o,p,a,c],s.walk(t,r,e),g(t)},r.getUrl=function(t,e){return s.walk(t,[l],e),g(t)},r.post=function(t,e){return t.lastMethodName="POST",v(t,t.requestModuleInstance,t.requestModuleInstance.post,e),g(t)},r.put=function(t,e){return t.lastMethodName="PUT",v(t,t.requestModuleInstance,t.requestModuleInstance.put,e),g(t)},r.patch=function(t,e){return t.lastMethodName="PATCH",v(t,t.requestModuleInstance,t.requestModuleInstance.patch,e),g(t)},r.delete=function(t,e){return t.lastMethodName="DELETE",v(t,t.requestModuleInstance,t.requestModuleInstance.del,e),g(t)}},{"./abort_traversal":6,"./http_requests":10,"./is_continuation":11,"./transforms/apply_transforms":18,"./transforms/check_http_status":19,"./transforms/continuation_to_doc":20,"./transforms/continuation_to_response":21,"./transforms/convert_embedded_doc_to_response":22,"./transforms/execute_last_http_request":24,"./transforms/execute_last_http_request_for_convert_response":25,"./transforms/extract_doc":26,"./transforms/extract_response":27,"./transforms/extract_url":28,"./transforms/fetch_last_resource":29,"./transforms/parse":32,"./transforms/parse_link_header":33,"./walker":39,minilog:1}],8:[function(t,e,r){"use strict";var n=t("minilog"),o=t("request"),s=t("util"),i=t("./actions"),a=t("./abort_traversal").abortTraversal,u=t("./errors"),c=u.errors,l=u.createError,p=t("./media_type_registry"),h=t("./media_types"),f=t("./merge_recursive"),d=n("traverson");function y(t,e){this.mediaType=t||h.CONTENT_NEGOTIATION,this.linkType=e||"link-rel",this.adapter=this._createAdapter(this.mediaType),this.autoHeaders=!0,this.contentNegotiation=!0,this.rawPayloadFlag=!1,this.convertResponseToObjectFlag=!1,this.links=[],this.jsonParser=JSON.parse,this.requestModuleInstance=o,this.requestOptions={},this.resolveRelativeFlag=!1,this.preferEmbedded=!1,this.lastTraversalState=null,this.continuation=null}function v(t,e){var r=null!==e&&void 0!==typeof e?e:null,n={aborted:!1,adapter:t.adapter||null,body:r,callbackHasBeenCalledAfterAbort:!1,autoHeaders:t.setsAutoHeaders(),contentNegotiation:t.doesContentNegotiation(),continuation:null,rawPayload:t.sendsRawPayload(),convertResponseToObject:t.convertsResponseToObject(),links:t.links,jsonParser:t.getJsonParser(),requestModuleInstance:t.getRequestLibrary(),requestOptions:t.getRequestOptions(),resolveRelative:t.doesResolveRelative(),preferEmbedded:t.doesPreferEmbeddedResources(),startUrl:t.startUrl,step:{url:t.startUrl,index:0},templateParameters:t.getTemplateParameters()};return n.abortTraversal=a.bind(n),t.continuation&&(n.continuation=t.continuation,n.step=t.continuation.step,t.continuation=null),n}function g(r,n,o,s){return function(t,e){return t?o(t):o(null,e,{continue:function(){if(!n)throw l("No traversal state to continue from.",c.InvalidStateError);var t,e;return d.debug("> continuing finished traversal process"),r.continuation={step:n.step,action:s},r.continuation.step.index=0,e=n,(t=r).aborted=!1,t.adapter=e.adapter,t.body=e.body,t.callbackHasBeenCalledAfterAbort=!1,t.autoHeaders=e.autoHeaders,t.contentNegotiation=e.contentNegotiation,t.rawPayload=e.rawPayload,t.convertResponseToObjectFlag=e.convertResponseToObject,t.links=[],t.jsonParser=e.jsonParser,t.requestModuleInstance=e.requestModuleInstance,t.requestOptions=e.requestOptions,t.resolveRelativeFlag=e.resolveRelative,t.preferEmbedded=e.preferEmbedded,t.startUrl=e.startUrl,t.templateParameters=e.templateParameters,r}})}}function m(t){return s.isArray(t)?b(t):"object"==typeof t?f(null,t):t}function b(t){return t?t.slice(0):t}y.prototype._createAdapter=function(t){var e=p.get(t);if(!e)throw l("Unknown or unsupported media type: "+t,c.UnsupportedMediaType);return d.debug("creating new "+e.name),new e(d)},y.prototype.newRequest=function(){var t=new y(this.getMediaType(),this.getLinkType());return t.useAutoHeaders(this.setsAutoHeaders()),t.contentNegotiation=this.doesContentNegotiation(),t.convertResponseToObject(this.convertsResponseToObject()),t.from(b(this.getFrom())),t.withTemplateParameters(m(this.getTemplateParameters())),t.withRequestOptions(m(this.getRequestOptions())),t.withRequestLibrary(this.getRequestLibrary()),t.parseResponseBodiesWith(this.getJsonParser()),t.resolveRelative(this.doesResolveRelative()),t.preferEmbeddedResources(this.doesPreferEmbeddedResources()),t.continuation=this.continuation,t},y.prototype.setMediaType=function(t){return this.mediaType=t||h.CONTENT_NEGOTIATION,this.adapter=this._createAdapter(t),this.contentNegotiation=t===h.CONTENT_NEGOTIATION,this},y.prototype.getLinkType=function(){return this.linkType},y.prototype.json=function(){return this.setMediaType(h.JSON),this},y.prototype.jsonHal=function(){return this.setMediaType(h.JSON_HAL),this},y.prototype.useContentNegotiation=function(){return this.setMediaType(h.CONTENT_NEGOTIATION),this.contentNegotiation=!0,this},y.prototype.from=function(t){return this.startUrl=t,this},y.prototype.follow=function(){for(var t=Array.prototype.slice.apply(1===arguments.length&&s.isArray(arguments[0])?arguments[0]:arguments),e=0;e<t.length;e++)"string"==typeof t[e]&&(t[e]={type:this.linkType,value:t[e]});return this.links=this.links.concat(t),this},y.prototype.followLocationHeader=function(){return this.links.push({type:"header",value:"location"}),this},y.prototype.walk=y.prototype.follow,y.prototype.withTemplateParameters=function(t){return this.templateParameters=t,this},y.prototype.withRequestOptions=function(t){return this.requestOptions=t,this},y.prototype.addRequestOptions=function(t){return s.isArray(this.requestOptions)&&s.isArray(t)?function(t,e){for(var r=0;r<Math.max(t.length,e.length);r++)t[r]=f(t[r],e[r])}(this.requestOptions,t):"object"==typeof this.requestOptions&&s.isArray(t)?this.requestOptions=function(t,e){for(var r=[],n=0;n<e.length;n++)r[n]=f(e[n],t);return r}(this.requestOptions,t):s.isArray(this.requestOptions)&&"object"==typeof t?function(t,e){for(var r=0;r<t.length;r++)f(t[r],e)}(this.requestOptions,t):f(this.requestOptions,t),this},y.prototype.withRequestLibrary=function(t){return this.requestModuleInstance=t,this},y.prototype.parseResponseBodiesWith=function(t){return this.jsonParser=t,this},y.prototype.disableAutoHeaders=function(){return this.useAutoHeaders(!1)},y.prototype.enableAutoHeaders=function(){return this.useAutoHeaders(!0)},y.prototype.useAutoHeaders=function(t){return null==t&&(t=!0),this.autoHeaders=!!t,this},y.prototype.sendRawPayload=function(t){return null==t&&(t=!0),this.rawPayloadFlag=!!t,this},y.prototype.convertResponseToObject=function(t){return null==t&&(t=!0),this.convertResponseToObjectFlag=!!t,this},y.prototype.resolveRelative=function(t){return null==t&&(t=!0),this.resolveRelativeFlag=!!t,this},y.prototype.preferEmbeddedResources=function(t){return null==t&&(t=!0),this.preferEmbedded=!!t,this},y.prototype.getMediaType=function(){return this.mediaType},y.prototype.getFrom=function(){return this.startUrl},y.prototype.getTemplateParameters=function(){return this.templateParameters},y.prototype.getRequestOptions=function(){return this.requestOptions},y.prototype.getRequestLibrary=function(){return this.requestModuleInstance},y.prototype.getJsonParser=function(){return this.jsonParser},y.prototype.setsAutoHeaders=function(){return this.autoHeaders},y.prototype.sendsRawPayload=function(){return this.rawPayloadFlag},y.prototype.convertsResponseToObject=function(){return this.convertResponseToObjectFlag},y.prototype.doesResolveRelative=function(){return this.resolveRelativeFlag},y.prototype.doesPreferEmbeddedResources=function(){return this.preferEmbedded},y.prototype.doesContentNegotiation=function(){return this.contentNegotiation},y.prototype.get=function(t){d.debug("initiating traversal (get)");var e=v(this);return i.get(e,g(this,e,t,"get"))},y.prototype.getResource=function(t){d.debug("initiating traversal (getResource)"),this.convertResponseToObjectFlag=!0;var e=v(this);return i.get(e,g(this,e,t,"getResource"))},y.prototype.getUri=y.prototype.getUrl=function(t){d.debug("initiating traversal (getUrl)");var e=v(this);return i.getUrl(e,g(this,e,t,"getUrl"))},y.prototype.post=function(t,e){d.debug("initiating traversal (post)");var r=v(this,t);return i.post(r,g(this,r,e,"post"))},y.prototype.put=function(t,e){d.debug("initiating traversal (put)");var r=v(this,t);return i.put(r,g(this,r,e,"put"))},y.prototype.patch=function(t,e){d.debug("initiating traversal (patch)");var r=v(this,t);return i.patch(r,g(this,r,e,"patch"))},y.prototype.del=y.prototype.delete=function(t){d.debug("initiating traversal (delete)");var e=v(this);return i.delete(e,g(this,e,t,"delete"))},y.prototype.linkHeader=function(){return this.linkType="link-header",this},e.exports=y},{"./abort_traversal":6,"./actions":7,"./errors":9,"./media_type_registry":13,"./media_types":14,"./merge_recursive":15,minilog:1,request:3,util:2}],9:[function(t,e,r){"use strict";e.exports={errors:{HTTPError:"HTTPError",InvalidArgumentError:"InvalidArgumentError",InvalidStateError:"InvalidStateError",JSONError:"JSONError",JSONPathError:"JSONPathError",LinkError:"LinkError",TraversalAbortedError:"TraversalAbortedError",UnsupportedMediaType:"UnsupportedMediaTypeError"},createError:function(t,e,r){var n=new Error(t);return n.name=e,r&&(n.data=r),n}}},{}],10:[function(e,t,r){(function(i){"use strict";var a=e("minilog")("traverson"),u=e("./abort_traversal"),c=e("./transforms/detect_content_type"),t=e("./errors"),l=t.errors,p=t.createError,h=e("./transforms/get_options_for_step"),f=i&&Object.hasOwnProperty.call(i,"nextTick");r.fetchResource=function(t,e){if(a.debug("fetching resource for next step"),t.step.url)return a.debug("fetching resource from",t.step.url),o=e,r=h(n=t),a.debug("HTTP GET request to",n.step.url),a.debug("options",r),n.mostRecentHttpMethodName="GET",n.currentRequest=n.requestModuleInstance.get(n.step.url,r,function(t,e,r){return a.debug("HTTP GET request to",n.step.url,"returned"),n.currentRequest=null,r&&!e.body&&(e.body=r),n.step.response=e,t?o(t,n):(a.debug("request to",n.step.url,"finished without error (",e.statusCode,")"),c(n,o)?o(null,n):void 0)}),void u.registerAbortListener(n,o);if(t.step.doc)return a.debug("resource for next step has already been fetched, using embedded"),f?i.nextTick(function(){e(null,t)}):e(null,t);var n,o,r,s=p("Can not process step.",l.InvalidStateError);return s.step=t.step,f?i.nextTick(function(){e(s,t)}):e(s,t)},r.executeHttpRequest=function(n,t,e,o,s){var r=h(n);null!==n.body&&void 0!==n.body&&(r.body=n.rawPayload||r.jsonReplacer?n.body:JSON.stringify(n.body)),a.debug("HTTP",o,"request to",n.step.url),a.debug("options",r),n.mostRecentHttpMethodName=o,n.currentRequest=e.call(t,n.step.url,r,function(t,e,r){return a.debug("HTTP",o,"request to",n.step.url,"returned"),n.currentRequest=null,r&&!e.body&&(e.body=r),n.step.response=e,t?s(t):s(null,e)}),u.registerAbortListener(n,s)}}).call(this,e("_process"))},{"./abort_traversal":6,"./errors":9,"./transforms/detect_content_type":23,"./transforms/get_options_for_step":31,_process:42,minilog:1}],11:[function(t,e,r){"use strict";e.exports=function(t){return t.continuation&&t.step&&t.step.response}},{}],12:[function(t,e,r){"use strict";t("minilog");var o,n=t("underscore.string");try{o=t("jsonpath-plus")}catch(t){o=!1,console.warn("Could not require jsonpath-plus, JSONPath support is not available.")}var s=t("./errors"),i=s.errors,a=s.createError,u=t("./parse_link_header_value");function c(t){this.log=t}c.mediaType="application/json",c.prototype.findNextStep=function(t,e){!function(t){if(null==t)throw a("Link object is null or undefined.",i.InvalidArgumentError);if("object"!=typeof t)throw a("Links must be objects, not "+typeof t+".",i.InvalidArgumentError,t);if(!t.type)throw a("Link objects has no type attribute.",i.InvalidArgumentError,t)}(e);var r=t.lastStep.doc;switch(this.log.debug("resolving link",e),e.type){case"link-rel":return this._handleLinkRel(r,e);case"header":return this._handleHeader(t.lastStep.response,e);case"link-header":return this._handleLinkHeader(t.lastStep.response,e);default:throw a("Link objects with type "+e.type+" are not supported by this adapter.",i.InvalidArgumentError,e)}},c.prototype._handleLinkRel=function(t,e){var r=e.value;if(this.log.debug("looking for link-rel",r,"in doc",t),this._testJSONPath(r))return{url:this._resolveJSONPath(t,r)};if(t[r])return{url:t[r]};throw a("Could not find property "+r+" in document.",i.LinkError,t)},c.prototype._testJSONPath=function(t){return n.startsWith(t,"$.")||n.startsWith(t,"$[")},c.prototype._resolveJSONPath=function(t,e){if(!o)throw a("JSONPath support is not available.");var r=o({json:t,path:e});if(1!==r.length)throw 1<r.length?a("JSONPath expression "+e+" returned more than one match in document:\n"+JSON.stringify(t),i.JSONPathError,t):a("JSONPath expression "+e+" returned no match in document:\n"+JSON.stringify(t),i.JSONPathError,t);var n=r[0];if(!n)throw a("JSONPath expression "+e+" was resolved but the result was null, undefined or an empty string in document:\n"+JSON.stringify(t),i.JSONPathError,t);if("string"!=typeof n)throw a("JSONPath expression "+e+' was resolved but the result is not a property of type string. Instead it has type "'+typeof n+'" in document:\n'+JSON.stringify(t),i.JSONPathError,t);return n},c.prototype._handleHeader=function(t,e){switch(e.value){case"location":var r=t.headers.location;if(!r)throw a("Following the location header but there was no location header in the last response.",i.LinkError,t.headers);return{url:r};default:throw a("Link objects with type header and value "+e.value+" are not supported by this adapter.",i.InvalidArgumentError,e)}},c.prototype._handleLinkHeader=function(t,e){if(!t.headers.link)throw a("There was no link header in the last response.",i.InvalidArgumentError,e);var r=u(t.headers.link);if(r[e.value])return{url:r[e.value].url};throw a("Link with relation "+e.value+" not found in link header.",i.InvalidArgumentError,e)},e.exports=c},{"./errors":9,"./parse_link_header_value":17,"jsonpath-plus":41,minilog:1,"underscore.string":4}],13:[function(t,e,r){"use strict";var n=t("./media_types"),o={};r.register=function(t,e){o[t]=e},r.get=function(t){return o[t]},r.register(n.CONTENT_NEGOTIATION,t("./negotiation_adapter")),r.register(n.JSON,t("./json_adapter"))},{"./json_adapter":12,"./media_types":14,"./negotiation_adapter":16}],14:[function(t,e,r){"use strict";var n=t("./json_adapter");e.exports={CONTENT_NEGOTIATION:"content-negotiation",JSON:n.mediaType,JSON_HAL:"application/hal+json"}},{"./json_adapter":12}],15:[function(t,e,r){"use strict";function n(t,e){for(var r in!t&&e&&(t={}),e)e.hasOwnProperty(r)&&o(t,e,r);return t}function o(t,e,r){"object"==typeof e[r]?(t[r]&&"object"==typeof t[r]||(t[r]={}),n(t[r],e[r])):t[r]=e[r]}e.exports=n},{}],16:[function(t,e,r){"use strict";var n=t("./errors"),o=n.errors,s=n.createError;function i(t){}i.prototype.findNextStep=function(t,e){throw s("Content negotiation did not happen",o.InvalidStateError)},e.exports=i},{"./errors":9}],17:[function(t,e,r){var n=t("./merge_recursive");function o(t){try{var e=t.split(";"),r=e.shift().replace(/[<>]/g,""),n=e.reduce(s,{});return n.url=r,n}catch(t){return null}}function s(t,e){var r=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return r&&(t[r[1]]=r[2]),t}function i(t){return t&&t.rel}function a(e,r){return r.rel.split(/\s+/).forEach(function(t){e[t]=n({rel:t},r)}),e}e.exports=function(t){return t?t.split(/,\s*</).map(o).filter(i).reduce(a,{}):null}},{"./merge_recursive":15}],18:[function(t,e,r){(function(i){"use strict";var a=t("minilog")("traverson"),u=i&&Object.hasOwnProperty.call(i,"nextTick");e.exports=function e(r,t,n){a.debug("applying",r.length,"transforms");for(var o=0;o<r.length;o++){var s=r[o];if(a.debug("next transform",s),s.isAsync)return s(t,function(t){e(r.slice(o+1),t,n)});if(!s(t))return void a.debug("transform has failed or was a final transform")}return a.debug("all transformations done, starting next step"),u?i.nextTick(function(){n(t)}):n(t)}}).call(this,t("_process"))},{_process:42,minilog:1}],19:[function(t,e,r){"use strict";var n=t("minilog")("traverson"),o=t("../errors"),s=o.errors,i=o.createError,a=t("../is_continuation");e.exports=function(t){if(a(t))return!0;if(n.debug("checking http status"),!t.step.response&&t.step.doc)return n.debug("found embedded document, assuming no HTTP request has been made"),!0;var e=t.step.response.statusCode;if(e&&(e<200||300<=e)){var r=function(t,e){var r=i("HTTP "+t.mostRecentHttpMethodName+" request to "+t.step.url+" resulted in HTTP status code "+e+".",s.HTTPError);r.url=t.step.url,r.httpStatus=e;var n=t.step.response.body;r.body=n;try{r.doc=JSON.parse(n)}catch(t){}return r}(t,e);return n.error("unexpected http status code"),n.error(r),t.callback(r),!1}return n.debug("http status code ok ("+e+")"),!0}},{"../errors":9,"../is_continuation":11,minilog:1}],20:[function(t,e,r){"use strict";var n=t("minilog")("traverson"),o=t("../is_continuation");e.exports=function(t){return!o(t)||(n.debug("continuing from last traversal process (actions)"),t.continuation=null,t.callback(null,t.step.doc),!1)}},{"../is_continuation":11,minilog:1}],21:[function(t,e,r){"use strict";var n=t("minilog")("traverson"),o=t("./convert_embedded_doc_to_response"),s=t("../is_continuation");e.exports=function(t){return!s(t)||(n.debug("continuing from last traversal process (actions)"),t.continuation=null,o(t),t.callback(null,t.step.response),!1)}},{"../is_continuation":11,"./convert_embedded_doc_to_response":22,minilog:1}],22:[function(t,e,r){"use strict";var n=t("minilog")("traverson");e.exports=function(t){return!t.step.response&&t.step.doc&&(n.debug("faking HTTP response for embedded resource"),t.step.response={statusCode:200,body:JSON.stringify(t.step.doc),remark:"This is not an actual HTTP response. The resource you requested was an embedded resource, so no HTTP request was made to acquire it."}),!0}},{minilog:1}],23:[function(t,e,r){"use strict";var o=t("minilog")("traverson"),s=t("../media_type_registry"),n=t("../errors"),i=n.errors,a=n.createError;e.exports=function(t,e){if(t.contentNegotiation&&t.step.response&&t.step.response.headers&&t.step.response.headers["content-type"]){var r=t.step.response.headers["content-type"].split(/[; ]/)[0];o.debug("found content type string",r);var n=s.get(r);if(!n)return o.error("no adapter for content type",r),e(a("Unknown content type for content type detection: "+r,i.UnsupportedMediaType),t),!1;t.adapter=new n(o),o.debug("switched to media type adapter",t.adapter.name||t.adapter.constructor.name)}return!0}},{"../errors":9,"../media_type_registry":13,minilog:1}],24:[function(t,e,r){"use strict";t("minilog")("traverson");var n=t("../abort_traversal"),o=t("../http_requests");function s(t,e){if(t.aborted)return n.callCallbackOnAbort(t);o.executeHttpRequest(t,t.requestModuleInstance,t.lastMethod,t.lastMethodName,t.callback)}s.isAsync=!0,e.exports=s},{"../abort_traversal":6,"../http_requests":10,minilog:1}],25:[function(t,e,r){"use strict";var o=t("minilog")("traverson"),s=t("../abort_traversal"),i=t("../http_requests");function n(r,n){if(r.aborted)return s.callCallbackOnAbort(r);i.executeHttpRequest(r,r.requestModuleInstance,r.lastMethod,r.lastMethodName,function(t,e){if(t)return t.aborted||(o.debug("error while executing http request, processing step",r.step),o.error(t)),r.callback(t);n(r)})}n.isAsync=!0,e.exports=n},{"../abort_traversal":6,"../http_requests":10,minilog:1}],26:[function(t,e,r){"use strict";var n=t("minilog")("traverson");e.exports=function(t){return n.debug("walker.walk has finished"),t.callback(null,t.step.doc),!1}},{minilog:1}],27:[function(t,e,r){"use strict";var n=t("minilog")("traverson");e.exports=function(t){return n.debug("walker.walk has finished"),t.callback(null,t.step.response),!1}},{minilog:1}],28:[function(t,e,r){"use strict";var n=t("minilog")("traverson"),o=t("url"),s=t("../errors"),i=s.errors,a=s.createError;e.exports=function(t){return n.debug("walker.walk has finished"),t.step.url?t.callback(null,t.step.url):t.step.doc&&t.step.doc._links&&t.step.doc._links.self&&t.step.doc._links.self.href?t.callback(null,o.resolve(t.startUrl,t.step.doc._links.self.href)):t.callback(a('You requested an URL but the last resource is an embedded resource and has no URL of its own (that is, it has no link with rel="self"',i.LinkError))}},{"../errors":9,minilog:1,url:5}],29:[function(t,e,r){"use strict";var n=t("minilog")("traverson"),o=t("../abort_traversal"),s=t("../http_requests");function i(t,r){if(t.aborted)return o.callCallbackOnAbort(t);s.fetchResource(t,function(t,e){if(n.debug("fetchResource returned (fetchLastResource)."),t)return t.aborted||(n.debug("error while executing http request"),n.error(t)),e.callback(t);r(e)})}i.isAsync=!0,e.exports=i},{"../abort_traversal":6,"../http_requests":10,minilog:1}],30:[function(e,u,t){(function(r){"use strict";var n=e("minilog")("traverson"),o=e("../abort_traversal"),s=e("../is_continuation"),i=e("../http_requests"),a=r&&Object.hasOwnProperty.call(r,"nextTick");function t(t,e){s(t)?function(t,e){if(n.debug("continuing from last traversal process (walker)"),a)return r.nextTick(function(){e(t)});e(t)}(t,e):function(t,r){if(t.aborted)return o.callCallbackOnAbort(t);i.fetchResource(t,function(t,e){if(n.debug("fetchResource returned"),t)return t.aborted||(n.debug("error while executing http request"),n.error(t)),e.callback(t);r(e)})}(t,e)}t.isAsync=!0,u.exports=t}).call(this,e("_process"))},{"../abort_traversal":6,"../http_requests":10,"../is_continuation":11,_process:42,minilog:1}],31:[function(t,e,r){"use strict";var s=t("minilog")("traverson"),i=t("util"),a=t("../merge_recursive");function u(t,e){return t.form?{Accept:e}:{Accept:e,"Content-Type":e}}e.exports=function(t){var e,r,n,o=t.requestOptions;return i.isArray(t.requestOptions)&&(o=t.requestOptions[t.step.index]||{}),t.autoHeaders&&(r=o,(n=(e=t).adapter.constructor.mediaType||e.adapter.mediaType)&&(r.headers?r.headers=a(u(r,n),r.headers):r.headers=u(r,n))),s.debug("options",o),o}},{"../merge_recursive":15,minilog:1,util:2}],32:[function(t,e,r){"use strict";var i=t("minilog")("traverson"),n=t("../errors"),a=n.errors,u=n.createError,o=t("../is_continuation");e.exports=function(e){if(o(e)&&(i.debug("continuing from last traversal process (transforms/parse)"),"getResource"===e.continuation.action))return!0;if(e.step.doc)return i.debug("no parsing necessary, probably an embedded document"),!0;try{return t=e,i.debug("parsing response body"),t.requestOptions&&t.requestOptions.jsonReviver?t.step.doc=t.step.response.body:t.step.doc=t.jsonParser(t.step.response.body),!0}catch(t){return function(t,e){var r=e;"SyntaxError"===e.name&&(n=t.step.url,o=t.step.response.body,(s=u("The document at "+n+" could not be parsed as JSON: "+o,a.JSONError,o)).url=n,s.body=o,r=s);var n,o,s;i.error("parsing failed"),i.error(r),t.callback(r)}(e,t),!1}var t}},{"../errors":9,"../is_continuation":11,minilog:1}],33:[function(t,e,r){"use strict";var o=t("minilog")("traverson"),s=t("../parse_link_header_value");e.exports=function(e){if(!(e.step.doc&&e.step.response&&e.step.response.headers&&e.step.response.headers.link))return!0;try{var t=s(e.step.response.headers.link);return e.step.doc._linkHeaders=t,!0}catch(t){return r=e,n=t,o.error("failed to parse link header"),o.error(n),r.callback(n),!1}var r,n}},{"../parse_link_header_value":17,minilog:1}],34:[function(t,e,r){"use strict";var n=t("../is_continuation");e.exports=function(t){return!!n(t)||!(t.continuation=null)}},{"../is_continuation":11}],35:[function(t,e,r){"use strict";var n=t("../is_continuation");e.exports=function(t){return!!n(t)||!(t.lastStep=null)}},{"../is_continuation":11}],36:[function(t,e,r){"use strict";var n=t("minilog")("traverson"),o=t("underscore.string"),s=t("url"),i=/https?:\/\//i;e.exports=function(t){return t.step.url&&0!==t.step.url.search(i)&&(n.debug("found non full qualified URL"),t.resolveRelative&&t.lastStep&&t.lastStep.url?(n.debug("resolving URL relative"),o.startsWith(t.step.url,"/")&&o.endsWith(t.lastStep.url,"/")&&(t.step.url=o.splice(t.step.url,0,1)),t.step.url=t.lastStep.url+t.step.url):t.step.url=s.resolve(t.startUrl,t.step.url)),!0}},{minilog:1,"underscore.string":4,url:5}],37:[function(t,e,r){"use strict";var n=t("minilog")("traverson"),o=t("underscore.string"),s=t("url-template"),i=t("util");e.exports=function(t){if(t.step.url){var e=t.templateParameters;if(i.isArray(e)&&(e=e[t.step.index]),e=e||{},o.contains(t.step.url,"{")){n.debug("resolving URI template");var r=s.parse(t.step.url).expand(e);n.debug("resolved to",r),t.step.url=r}}return!0}},{minilog:1,"underscore.string":4,"url-template":50,util:2}],38:[function(t,e,r){"use strict";var n=t("minilog")("traverson");e.exports=function(t){var e=t.links[t.step.index];return n.debug("next link:",e),t.lastStep=t.step,t.step=function(e,t){try{return e.adapter.findNextStep(e,t)}catch(t){return n.error("could not find next step"),n.error(t),e.callback(t),null}}(t,e),!!t.step&&(n.debug("found next step",t.step),t.step.index=t.lastStep.index+1,!0)}},{minilog:1}],39:[function(t,e,r){"use strict";var o=t("minilog")("traverson"),s=t("./abort_traversal"),i=t("./transforms/apply_transforms"),n=(t("./is_continuation"),t("./transforms/resolve_uri_template")),a=[t("./transforms/fetch_resource"),t("./transforms/reset_last_step"),t("./transforms/check_http_status"),t("./transforms/parse"),t("./transforms/switch_to_next_step"),n,t("./transforms/resolve_next_url"),t("./transforms/reset_continuation")];function u(t){return t.aborted}r.walk=function(t,e,r){n(t)&&(o.debug("starting to follow links"),e=e||[],t.callback=r,function e(t,r){o.debug("processing next step");if(n=t,n.step.index<n.links.length&&!u(t))i(a,t,function(t){o.debug("successfully processed step"),e(t,r)});else{if(u(t))return s.callCallbackOnAbort(t);o.debug("link array exhausted"),i(r,t,function(t){return t.callback()})}var n}(t,e))}},{"./abort_traversal":6,"./is_continuation":11,"./transforms/apply_transforms":18,"./transforms/check_http_status":19,"./transforms/fetch_resource":30,"./transforms/parse":32,"./transforms/reset_continuation":34,"./transforms/reset_last_step":35,"./transforms/resolve_next_url":36,"./transforms/resolve_uri_template":37,"./transforms/switch_to_next_step":38,minilog:1}],40:[function(t,e,r){function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}void 0!==e&&(e.exports=n),n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<n.length;o++)if((r=n[o])===e||r.fn===e){n.splice(o,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks["$"+t];if(r)for(var n=0,o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,e);return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],41:[function(require,module,exports){var module;!function(glbl,require){"use strict";var isNode=module&&!!module.exports,allowedResultTypes=["value","path","pointer","parent","parentProperty","all"];Array.prototype.includes||(Array.prototype.includes=function(t){return-1<this.indexOf(t)}),String.prototype.includes||(String.prototype.includes=function(t){return-1<this.indexOf(t)});var moveToAnotherArray=function(t,e,r){for(var n=0,o=t.length;n<o;n++){r(t[n])&&e.push(t.splice(n--,1)[0])}},vm=isNode?require("vm"):{runInNewContext:function(expr,context){var keys=Object.keys(context),funcs=[];moveToAnotherArray(keys,funcs,function(t){return"function"==typeof context[t]});var code=funcs.reduce(function(t,e){return"var "+e+"="+context[e].toString()+";"+t},"");return code+=keys.reduce(function(t,e){return"var "+e+"="+JSON.stringify(context[e]).replace(/\u2028|\u2029/g,function(t){return"\\u202"+("\u2028"===t?"8":"9")})+";"+t},expr),eval(code)}};function push(t,e){return(t=t.slice()).push(e),t}function unshift(t,e){return(e=e.slice()).unshift(t),e}function NewError(t){this.avoidNew=!0,this.value=t,this.message='JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'}function JSONPath(t,e,r,n,o){if(!(this instanceof JSONPath))try{return new JSONPath(t,e,r,n,o)}catch(t){if(!t.avoidNew)throw t;return t.value}"string"==typeof t&&(o=n,n=r,r=e,e=t,t={});var s=(t=t||{}).hasOwnProperty("json")&&t.hasOwnProperty("path");if(this.json=t.json||r,this.path=t.path||e,this.resultType=t.resultType&&t.resultType.toLowerCase()||"value",this.flatten=t.flatten||!1,this.wrap=!t.hasOwnProperty("wrap")||t.wrap,this.sandbox=t.sandbox||{},this.preventEval=t.preventEval||!1,this.parent=t.parent||null,this.parentProperty=t.parentProperty||null,this.callback=t.callback||n||null,this.otherTypeCallback=t.otherTypeCallback||o||function(){throw new Error("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==t.autostart){var i=this.evaluate({path:s?t.path:e,json:s?t.json:r});if(!i||"object"!=typeof i)throw new NewError(i);return i}}JSONPath.prototype.evaluate=function(t,e,r,n){var o=this,s=this.flatten,i=this.wrap,a=this.parent,u=this.parentProperty;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,r=r||this.callback,this.currOtherTypeCallback=n||this.otherTypeCallback,e=e||this.json,(t=t||this.path)&&"object"==typeof t){if(!t.path)throw new Error('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');e=t.hasOwnProperty("json")?t.json:e,s=t.hasOwnProperty("flatten")?t.flatten:s,this.currResultType=t.hasOwnProperty("resultType")?t.resultType:this.currResultType,this.currSandbox=t.hasOwnProperty("sandbox")?t.sandbox:this.currSandbox,i=t.hasOwnProperty("wrap")?t.wrap:i,this.currPreventEval=t.hasOwnProperty("preventEval")?t.preventEval:this.currPreventEval,r=t.hasOwnProperty("callback")?t.callback:r,this.currOtherTypeCallback=t.hasOwnProperty("otherTypeCallback")?t.otherTypeCallback:this.currOtherTypeCallback,a=t.hasOwnProperty("parent")?t.parent:a,u=t.hasOwnProperty("parentProperty")?t.parentProperty:u,t=t.path}if(a=a||null,u=u||null,Array.isArray(t)&&(t=JSONPath.toPathString(t)),t&&e&&allowedResultTypes.includes(this.currResultType)){this._obj=e;var c=JSONPath.toPathArray(t);"$"===c[0]&&1<c.length&&c.shift(),this._hasParentSelector=null;var l=this._trace(c,e,["$"],a,u,r);return(l=l.filter(function(t){return t&&!t.isParentSelector})).length?1!==l.length||i||Array.isArray(l[0].value)?l.reduce(function(t,e){var r=o._getPreferredOutput(e);return s&&Array.isArray(r)?t=t.concat(r):t.push(r),t},[]):this._getPreferredOutput(l[0]):i?[]:void 0}},JSONPath.prototype._getPreferredOutput=function(t){var e=this.currResultType;switch(e){case"all":return t.path="string"==typeof t.path?t.path:JSONPath.toPathString(t.path),t;case"value":case"parent":case"parentProperty":return t[e];case"path":return JSONPath.toPathString(t[e]);case"pointer":return JSONPath.toPointer(t.path)}},JSONPath.prototype._handleCallback=function(t,e,r){if(e){var n=this._getPreferredOutput(t);t.path="string"==typeof t.path?t.path:JSONPath.toPathString(t.path),e(n,r,t)}},JSONPath.prototype._trace=function(t,e,r,n,o,s,i){var a,u=this;if(!t.length)return a={path:r,value:e,parent:n,parentProperty:o},this._handleCallback(a,s,"value"),a;var c=t[0],l=t.slice(1),p=[];function h(t){p.push(t)}function f(t){Array.isArray(t)?t.forEach(h):p.push(t)}if(("string"!=typeof c||i)&&e&&Object.prototype.hasOwnProperty.call(e,c))f(this._trace(l,e[c],push(r,c),e,c,s));else if("*"===c)this._walk(c,l,e,r,n,o,s,function(t,e,r,n,o,s,i,a){f(u._trace(unshift(t,r),n,o,s,i,a,!0))});else if(".."===c)f(this._trace(l,e,r,n,o,s)),this._walk(c,l,e,r,n,o,s,function(t,e,r,n,o,s,i,a){"object"==typeof n[t]&&f(u._trace(unshift(e,r),n[t],push(o,t),n,t,a))});else{if("^"===c)return this._hasParentSelector=!0,r.length?{path:r.slice(0,-1),expr:l,isParentSelector:!0}:[];if("~"===c)return a={path:push(r,c),value:o,parent:n,parentProperty:null},this._handleCallback(a,s,"property"),a;if("$"===c)f(this._trace(l,e,r,null,null,s));else if(/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(c))f(this._slice(c,l,e,r,n,o,s));else if(0===c.indexOf("?(")){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");this._walk(c,l,e,r,n,o,s,function(t,e,r,n,o,s,i,a){u._eval(e.replace(/^\?\((.*?)\)$/,"$1"),n[t],t,o,s,i)&&f(u._trace(unshift(t,r),n,o,s,i,a))})}else if("("===c[0]){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");f(this._trace(unshift(this._eval(c,e,r[r.length-1],r.slice(0,-1),n,o),l),e,r,n,o,s))}else if("@"===c[0]){var d=!1,y=c.slice(1,-2);switch(y){case"scalar":e&&["object","function"].includes(typeof e)||(d=!0);break;case"boolean":case"string":case"undefined":case"function":typeof e===y&&(d=!0);break;case"number":typeof e===y&&isFinite(e)&&(d=!0);break;case"nonFinite":"number"!=typeof e||isFinite(e)||(d=!0);break;case"object":e&&typeof e===y&&(d=!0);break;case"array":Array.isArray(e)&&(d=!0);break;case"other":d=this.currOtherTypeCallback(e,r,n,o);break;case"integer":e!==+e||!isFinite(e)||e%1||(d=!0);break;case"null":null===e&&(d=!0)}if(d)return a={path:r,value:e,parent:n,parentProperty:o},this._handleCallback(a,s,"value"),a}else if("`"===c[0]&&e&&Object.prototype.hasOwnProperty.call(e,c.slice(1))){var v=c.slice(1);f(this._trace(l,e[v],push(r,v),e,v,s,!0))}else if(c.includes(",")){var g,m;for(g=c.split(","),m=0;m<g.length;m++)f(this._trace(unshift(g[m],l),e,r,n,o,s))}else!i&&e&&Object.prototype.hasOwnProperty.call(e,c)&&f(this._trace(l,e[c],push(r,c),e,c,s,!0))}if(this._hasParentSelector)for(var b=0;b<p.length;b++){var _=p[b];if(_.isParentSelector){var w=u._trace(_.expr,e,_.path,n,o,s);if(Array.isArray(w)){p[b]=w[0];for(var T=1,O=w.length;T<O;T++)b++,p.splice(b,0,w[T])}else p[b]=w}}return p},JSONPath.prototype._walk=function(t,e,r,n,o,s,i,a){var u,c,l;if(Array.isArray(r))for(u=0,c=r.length;u<c;u++)a(u,t,e,r,n,o,s,i);else if("object"==typeof r)for(l in r)Object.prototype.hasOwnProperty.call(r,l)&&a(l,t,e,r,n,o,s,i)},JSONPath.prototype._slice=function(t,e,r,n,o,s,i){if(Array.isArray(r)){var a,u=r.length,c=t.split(":"),l=c[0]&&parseInt(c[0],10)||0,p=c[1]&&parseInt(c[1],10)||u,h=c[2]&&parseInt(c[2],10)||1;l=l<0?Math.max(0,l+u):Math.min(u,l),p=p<0?Math.max(0,p+u):Math.min(u,p);var f=[];for(a=l;a<p;a+=h){var d=this._trace(unshift(a,e),r,n,o,s,i);Array.isArray(d)?d.forEach(function(t){f.push(t)}):f.push(d)}return f}},JSONPath.prototype._eval=function(e,t,r,n,o,s){if(!this._obj||!t)return!1;e.includes("@parentProperty")&&(this.currSandbox._$_parentProperty=s,e=e.replace(/@parentProperty/g,"_$_parentProperty")),e.includes("@parent")&&(this.currSandbox._$_parent=o,e=e.replace(/@parent/g,"_$_parent")),e.includes("@property")&&(this.currSandbox._$_property=r,e=e.replace(/@property/g,"_$_property")),e.includes("@path")&&(this.currSandbox._$_path=JSONPath.toPathString(n.concat([r])),e=e.replace(/@path/g,"_$_path")),e.match(/@([\.\s\)\[])/)&&(this.currSandbox._$_v=t,e=e.replace(/@([\.\s\)\[])/g,"_$_v$1"));try{return vm.runInNewContext(e,this.currSandbox)}catch(t){throw console.log(t),new Error("jsonPath: "+t.message+": "+e)}},JSONPath.cache={},JSONPath.toPathString=function(t){var e,r,n=t,o="$";for(e=1,r=n.length;e<r;e++)/^(~|\^|@.*?\(\))$/.test(n[e])||(o+=/^[0-9*]+$/.test(n[e])?"["+n[e]+"]":"['"+n[e]+"']");return o},JSONPath.toPointer=function(t){var e,r,n=t,o="";for(e=1,r=n.length;e<r;e++)/^(~|\^|@.*?\(\))$/.test(n[e])||(o+="/"+n[e].toString().replace(/\~/g,"~0").replace(/\//g,"~1"));return o},JSONPath.toPathArray=function(t){var e=JSONPath.cache;if(e[t])return e[t].concat();var r=[],n=t.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/[\['](\??\(.*?\))[\]']/g,function(t,e){return"[#"+(r.push(e)-1)+"]"}).replace(/\['([^'\]]*)'\]/g,function(t,e){return"['"+e.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"}).replace(/~/g,";~;").replace(/'?\.'?(?![^\[]*\])|\['?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,function(t,e){return";"+e.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").split(";").map(function(t){var e=t.match(/#([0-9]+)/);return e&&e[1]?r[e[1]]:t});return e[t]=n,e[t]},JSONPath.eval=function(t,e,r){return JSONPath(r,e,t)},"function"==typeof define&&define.amd?define(function(){return JSONPath}):isNode?module.exports=JSONPath:(glbl.jsonPath={eval:JSONPath.eval},glbl.JSONPath=JSONPath)}(this||self,void 0===require?null:require)},{vm:51}],42:[function(t,e,r){var n,o,s=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(t){o=a}}();var c,l=[],p=!1,h=-1;function f(){p&&c&&(p=!1,c.length?l=c.concat(l):h=-1,l.length&&d())}function d(){if(!p){var t=u(f);p=!0;for(var e=l.length;e;){for(c=l,l=[];++h<e;)c&&c[h].run();h=-1,e=l.length}c=null,p=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(t)}}function y(t,e){this.fun=t,this.array=e}function v(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new y(t,e)),1!==l.length||p||u(d)},y.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=v,s.addListener=v,s.once=v,s.off=v,s.removeListener=v,s.removeAllListeners=v,s.emit=v,s.prependListener=v,s.prependOnceListener=v,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],43:[function(t,e,r){var n,o;n=this,o=function(){return function(){var t=arguments.length;if(0===t)throw new Error("resolveUrl requires at least one argument; got none.");var e=document.createElement("base");if(e.href=arguments[0],1===t)return e.href;var r=document.getElementsByTagName("head")[0];r.insertBefore(e,r.firstChild);for(var n,o=document.createElement("a"),s=1;s<t;s++)o.href=arguments[s],n=o.href,e.href=n;return r.removeChild(e),n}},"function"==typeof define&&define.amd?define(o):"object"==typeof r?e.exports=o():n.resolveUrl=o()},{}],44:[function(t,e,r){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(t){n.prototype[t]=function(){return this._defaults.push({fn:t,arguments:arguments}),this}}),n.prototype._setDefaults=function(e){this._defaults.forEach(function(t){e[t.fn].apply(e,t.arguments)})},e.exports=n},{}],45:[function(t,e,r){var n;n="undefined"!=typeof window?window:"undefined"!=typeof self?self:(console.warn("Using browser-only version of superagent in non-browser environment"),this);var o=t("component-emitter"),s=t("./request-base"),i=t("./is-object"),a=t("./response-base"),u=t("./agent-base");function c(){}var l=r=e.exports=function(t,e){return"function"==typeof e?new r.Request("GET",t).end(e):1==arguments.length?new r.Request("GET",t):new r.Request(t,e)};r.Request=g,l.getXHR=function(){if(!(!n.XMLHttpRequest||n.location&&"file:"==n.location.protocol&&n.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}throw Error("Browser-only version of superagent could not find XHR")};var p="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};function h(t){if(!i(t))return t;var e=[];for(var r in t)f(e,r,t[r]);return e.join("&")}function f(e,r,t){if(null!=t)if(Array.isArray(t))t.forEach(function(t){f(e,r,t)});else if(i(t))for(var n in t)f(e,r+"["+n+"]",t[n]);else e.push(encodeURIComponent(r)+"="+encodeURIComponent(t));else null===t&&e.push(encodeURIComponent(r))}function d(t){for(var e,r,n={},o=t.split("&"),s=0,i=o.length;s<i;++s)-1==(r=(e=o[s]).indexOf("="))?n[decodeURIComponent(e)]="":n[decodeURIComponent(e.slice(0,r))]=decodeURIComponent(e.slice(r+1));return n}function y(t){return/[\/+]json($|[^-\w])/.test(t)}function v(t){this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var e=this.xhr.status;1223===e&&(e=204),this._setStatusProperties(e),this.header=this.headers=function(t){for(var e,r,n,o,s=t.split(/\r?\n/),i={},a=0,u=s.length;a<u;++a)-1!==(e=(r=s[a]).indexOf(":"))&&(n=r.slice(0,e).toLowerCase(),o=p(r.slice(e+1)),i[n]=o);return i}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&t._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function g(t,e){var n=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var e,r=null,t=null;try{t=new v(n)}catch(t){return(r=new Error("Parser is unable to parse the response")).parse=!0,r.original=t,n.xhr?(r.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,r.status=n.xhr.status?n.xhr.status:null,r.statusCode=r.status):(r.rawResponse=null,r.status=null),n.callback(r)}n.emit("response",t);try{n._isResponseOK(t)||(e=new Error(t.statusText||"Unsuccessful HTTP response"))}catch(t){e=t}e?(e.original=r,e.response=t,e.status=t.status,n.callback(e,t)):n.callback(null,t)})}function m(t,e,r){var n=l("DELETE",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n}l.serializeObject=h,l.parseString=d,l.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},l.serialize={"application/x-www-form-urlencoded":h,"application/json":JSON.stringify},l.parse={"application/x-www-form-urlencoded":d,"application/json":JSON.parse},a(v.prototype),v.prototype._parseBody=function(t){var e=l.parse[this.type];return this.req._parser?this.req._parser(this,t):(!e&&y(this.type)&&(e=l.parse["application/json"]),e&&t&&(t.length||t instanceof Object)?e(t):null)},v.prototype.toError=function(){var t=this.req,e=t.method,r=t.url,n="cannot "+e+" "+r+" ("+this.status+")",o=new Error(n);return o.status=this.status,o.method=e,o.url=r,o},l.Response=v,o(g.prototype),s(g.prototype),g.prototype.type=function(t){return this.set("Content-Type",l.types[t]||t),this},g.prototype.accept=function(t){return this.set("Accept",l.types[t]||t),this},g.prototype.auth=function(t,e,r){1===arguments.length&&(e=""),"object"==typeof e&&null!==e&&(r=e,e=""),r||(r={type:"function"==typeof btoa?"basic":"auto"});return this._auth(t,e,r,function(t){if("function"==typeof btoa)return btoa(t);throw new Error("Cannot use basic auth, btoa is not a function")})},g.prototype.query=function(t){return"string"!=typeof t&&(t=h(t)),t&&this._query.push(t),this},g.prototype.attach=function(t,e,r){if(e){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(t,e,r||e.name)}return this},g.prototype._getFormData=function(){return this._formData||(this._formData=new n.FormData),this._formData},g.prototype.callback=function(t,e){if(this._shouldRetry(t,e))return this._retry();var r=this._callback;this.clearTimeout(),t&&(this._maxRetries&&(t.retries=this._retries-1),this.emit("error",t)),r(t,e)},g.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},g.prototype.buffer=g.prototype.ca=g.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},g.prototype.pipe=g.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},g.prototype._isHost=function(t){return t&&"object"==typeof t&&!Array.isArray(t)&&"[object Object]"!==Object.prototype.toString.call(t)},g.prototype.end=function(t){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=t||c,this._finalizeQueryString(),this._end()},g.prototype._end=function(){var r=this,n=this.xhr=l.getXHR(),t=this._formData||this._data;this._setTimeouts(),n.onreadystatechange=function(){var t=n.readyState;if(2<=t&&r._responseTimeoutTimer&&clearTimeout(r._responseTimeoutTimer),4==t){var e;try{e=n.status}catch(t){e=0}if(!e){if(r.timedout||r._aborted)return;return r.crossDomainError()}r.emit("end")}};var e=function(t,e){0<e.total&&(e.percent=e.loaded/e.total*100),e.direction=t,r.emit("progress",e)};if(this.hasListeners("progress"))try{n.onprogress=e.bind(null,"download"),n.upload&&(n.upload.onprogress=e.bind(null,"upload"))}catch(t){}try{this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0)}catch(t){return this.callback(t)}if(this._withCredentials&&(n.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof t&&!this._isHost(t)){var o=this._header["content-type"],s=this._serializer||l.serialize[o?o.split(";")[0]:""];!s&&y(o)&&(s=l.serialize["application/json"]),s&&(t=s(t))}for(var i in this.header)null!=this.header[i]&&this.header.hasOwnProperty(i)&&n.setRequestHeader(i,this.header[i]);return this._responseType&&(n.responseType=this._responseType),this.emit("request",this),n.send(void 0!==t?t:null),this},l.agent=function(){return new u},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(n){u.prototype[n.toLowerCase()]=function(t,e){var r=new l.Request(n,t);return this._setDefaults(r),e&&r.end(e),r}}),u.prototype.del=u.prototype.delete,l.get=function(t,e,r){var n=l("GET",t);return"function"==typeof e&&(r=e,e=null),e&&n.query(e),r&&n.end(r),n},l.head=function(t,e,r){var n=l("HEAD",t);return"function"==typeof e&&(r=e,e=null),e&&n.query(e),r&&n.end(r),n},l.options=function(t,e,r){var n=l("OPTIONS",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},l.del=m,l.delete=m,l.patch=function(t,e,r){var n=l("PATCH",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},l.post=function(t,e,r){var n=l("POST",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},l.put=function(t,e,r){var n=l("PUT",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n}},{"./agent-base":44,"./is-object":46,"./request-base":47,"./response-base":48,"component-emitter":40}],46:[function(t,e,r){"use strict";e.exports=function(t){return null!==t&&"object"==typeof t}},{}],47:[function(t,e,r){"use strict";var o=t("./is-object");function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}(e.exports=n).prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},n.prototype.parse=function(t){return this._parser=t,this},n.prototype.responseType=function(t){return this._responseType=t,this},n.prototype.serialize=function(t){return this._serializer=t,this},n.prototype.timeout=function(t){if(!t||"object"!=typeof t)return this._timeout=t,this._responseTimeout=0,this;for(var e in t)switch(e){case"deadline":this._timeout=t.deadline;break;case"response":this._responseTimeout=t.response;break;default:console.warn("Unknown timeout option",e)}return this},n.prototype.retry=function(t,e){return 0!==arguments.length&&!0!==t||(t=1),t<=0&&(t=0),this._maxRetries=t,this._retries=0,this._retryCallback=e,this};var s=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];n.prototype._shouldRetry=function(t,e){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var r=this._retryCallback(t,e);if(!0===r)return!0;if(!1===r)return!1}catch(t){console.error(t)}if(e&&e.status&&500<=e.status&&501!=e.status)return!0;if(t){if(t.code&&~s.indexOf(t.code))return!0;if(t.timeout&&"ECONNABORTED"==t.code)return!0;if(t.crossDomain)return!0}return!1},n.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},n.prototype.then=function(t,e){if(!this._fullfilledPromise){var o=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(r,n){o.end(function(t,e){t?n(t):r(e)})})}return this._fullfilledPromise.then(t,e)},n.prototype.catch=function(t){return this.then(void 0,t)},n.prototype.use=function(t){return t(this),this},n.prototype.ok=function(t){if("function"!=typeof t)throw Error("Callback required");return this._okCallback=t,this},n.prototype._isResponseOK=function(t){return!!t&&(this._okCallback?this._okCallback(t):200<=t.status&&t.status<300)},n.prototype.getHeader=n.prototype.get=function(t){return this._header[t.toLowerCase()]},n.prototype.set=function(t,e){if(o(t)){for(var r in t)this.set(r,t[r]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},n.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},n.prototype.field=function(t,e){if(null==t)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),o(t)){for(var r in t)this.field(r,t[r]);return this}if(Array.isArray(e)){for(var n in e)this.field(t,e[n]);return this}if(null==e)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof e&&(e=""+e),this._getFormData().append(t,e),this},n.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},n.prototype._auth=function(t,e,r,n){switch(r.type){case"basic":this.set("Authorization","Basic "+n(t+":"+e));break;case"auto":this.username=t,this.password=e;break;case"bearer":this.set("Authorization","Bearer "+t)}return this},n.prototype.withCredentials=function(t){return null==t&&(t=!0),this._withCredentials=t,this},n.prototype.redirects=function(t){return this._maxRedirects=t,this},n.prototype.maxResponseSize=function(t){if("number"!=typeof t)throw TypeError("Invalid argument");return this._maxResponseSize=t,this},n.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},n.prototype.send=function(t){var e=o(t),r=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),e&&!this._data)Array.isArray(t)?this._data=[]:this._isHost(t)||(this._data={});else if(t&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(e&&o(this._data))for(var n in t)this._data[n]=t[n];else this._data="string"==typeof t?(r||this.type("form"),"application/x-www-form-urlencoded"==(r=this._header["content-type"])?this._data?this._data+"&"+t:t:(this._data||"")+t):t;return!e||this._isHost(t)||r||this.type("json"),this},n.prototype.sortQuery=function(t){return this._sort=void 0===t||t,this},n.prototype._finalizeQueryString=function(){var t=this._query.join("&");if(t&&(this.url+=(0<=this.url.indexOf("?")?"&":"?")+t),this._query.length=0,this._sort){var e=this.url.indexOf("?");if(0<=e){var r=this.url.substring(e+1).split("&");"function"==typeof this._sort?r.sort(this._sort):r.sort(),this.url=this.url.substring(0,e)+"?"+r.join("&")}}},n.prototype._appendQueryString=function(){console.trace("Unsupported")},n.prototype._timeoutError=function(t,e,r){if(!this._aborted){var n=new Error(t+e+"ms exceeded");n.timeout=e,n.code="ECONNABORTED",n.errno=r,this.timedout=!0,this.abort(),this.callback(n)}},n.prototype._setTimeouts=function(){var t=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){t._timeoutError("Timeout of ",t._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){t._timeoutError("Response timeout of ",t._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},{"./is-object":46}],48:[function(t,e,r){"use strict";var o=t("./utils");function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}(e.exports=n).prototype.get=function(t){return this.header[t.toLowerCase()]},n.prototype._setHeaderProperties=function(t){var e=t["content-type"]||"";this.type=o.type(e);var r=o.params(e);for(var n in r)this[n]=r[n];this.links={};try{t.link&&(this.links=o.parseLinks(t.link))}catch(t){}},n.prototype._setStatusProperties=function(t){var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.redirect=3==e,this.clientError=4==e,this.serverError=5==e,this.error=(4==e||5==e)&&this.toError(),this.created=201==t,this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.forbidden=403==t,this.notFound=404==t,this.unprocessableEntity=422==t}},{"./utils":49}],49:[function(t,e,r){"use strict";r.type=function(t){return t.split(/ *; */).shift()},r.params=function(t){return t.split(/ *; */).reduce(function(t,e){var r=e.split(/ *= */),n=r.shift(),o=r.shift();return n&&o&&(t[n]=o),t},{})},r.parseLinks=function(t){return t.split(/ *, */).reduce(function(t,e){var r=e.split(/ *; */),n=r[0].slice(1,-1);return t[r[1].split(/ *= */)[1].slice(1,-1)]=n,t},{})},r.cleanHeader=function(t,e){return delete t["content-type"],delete t["content-length"],delete t["transfer-encoding"],delete t.host,e&&(delete t.authorization,delete t.cookie),t}},{}],50:[function(t,e,r){var n,o;n=this,o=function(){function t(){}return t.prototype.encodeReserved=function(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map(function(t){return/%[0-9A-Fa-f]/.test(t)||(t=encodeURI(t).replace(/%5B/g,"[").replace(/%5D/g,"]")),t}).join("")},t.prototype.encodeUnreserved=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})},t.prototype.encodeValue=function(t,e,r){return e="+"===t||"#"===t?this.encodeReserved(e):this.encodeUnreserved(e),r?this.encodeUnreserved(r)+"="+e:e},t.prototype.isDefined=function(t){return null!=t},t.prototype.isKeyOperator=function(t){return";"===t||"&"===t||"?"===t},t.prototype.getValues=function(t,e,r,n){var o=t[r],s=[];if(this.isDefined(o)&&""!==o)if("string"==typeof o||"number"==typeof o||"boolean"==typeof o)o=o.toString(),n&&"*"!==n&&(o=o.substring(0,parseInt(n,10))),s.push(this.encodeValue(e,o,this.isKeyOperator(e)?r:null));else if("*"===n)Array.isArray(o)?o.filter(this.isDefined).forEach(function(t){s.push(this.encodeValue(e,t,this.isKeyOperator(e)?r:null))},this):Object.keys(o).forEach(function(t){this.isDefined(o[t])&&s.push(this.encodeValue(e,o[t],t))},this);else{var i=[];Array.isArray(o)?o.filter(this.isDefined).forEach(function(t){i.push(this.encodeValue(e,t))},this):Object.keys(o).forEach(function(t){this.isDefined(o[t])&&(i.push(this.encodeUnreserved(t)),i.push(this.encodeValue(e,o[t].toString())))},this),this.isKeyOperator(e)?s.push(this.encodeUnreserved(r)+"="+i.join(",")):0!==i.length&&s.push(i.join(","))}else";"===e?this.isDefined(o)&&s.push(this.encodeUnreserved(r)):""!==o||"&"!==e&&"?"!==e?""===o&&s.push(""):s.push(this.encodeUnreserved(r)+"=");return s},t.prototype.parse=function(t){var a=this,u=["+","#",".","/",";","?","&"];return{expand:function(i){return t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(t,e,r){if(e){var n=null,o=[];if(-1!==u.indexOf(e.charAt(0))&&(n=e.charAt(0),e=e.substr(1)),e.split(/,/g).forEach(function(t){var e=/([^:\*]*)(?::(\d+)|(\*))?/.exec(t);o.push.apply(o,a.getValues(i,n,e[1],e[2]||e[3]))}),n&&"+"!==n){var s=",";return"?"===n?s="&":"#"!==n&&(s=n),(0!==o.length?n:"")+o.join(s)}return o.join(",")}return a.encodeReserved(r)})}}},new t},"object"==typeof r?e.exports=o():"function"==typeof define&&define.amd?define([],o):n.urltemplate=o()},{}],51:[function(require,module,exports){var indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0;r<t.length;r++)if(t[r]===e)return r;return-1},Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var r in t)e.push(r);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var r=0;r<t.length;r++)e(t[r],r,t)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(t,e,r){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(t){return function(t,e,r){t[e]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(t){if(!(this instanceof Script))return new Script(t);this.code=t};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var r=t.contentWindow,n=r.eval,o=r.execScript;!n&&o&&(o.call(r,"null"),n=r.eval),forEach(Object_keys(e),function(t){r[t]=e[t]}),forEach(globals,function(t){e[t]&&(r[t]=e[t])});var s=Object_keys(r),i=n.call(r,this.code);return forEach(Object_keys(r),function(t){(t in e||-1===indexOf(s,t))&&(e[t]=r[t])}),forEach(globals,function(t){t in e||defineProp(e,t,r[t])}),document.body.removeChild(t),i},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var r=Script.createContext(e),t=this.runInContext(r);return e&&forEach(Object_keys(r),function(t){e[t]=r[t]}),t},forEach(Object_keys(Script.prototype),function(r){exports[r]=Script[r]=function(t){var e=Script(t);return e[r].apply(e,[].slice.call(arguments,1))}}),exports.isContext=function(t){return t instanceof Context},exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(e){var r=new Context;return"object"==typeof e&&forEach(Object_keys(e),function(t){r[t]=e[t]}),r}},{}],52:[function(a,t,u){(function(t){"use strict";a("minilog");var e=a("./lib/errors"),r=e.errors,n=e.createError,o=a("./lib/media_types"),s=a("./lib/builder"),i=a("./lib/media_type_registry");t.env.TRAVERSON_LOGGING&&a("minilog").enable(),u._Builder=s,u.newRequest=function(){return new s},u.from=function(t){var e=new s;return e.from(t),e},u.json={from:function(t){var e=new s;return e.from(t),e.setMediaType(o.JSON),e}},u.jsonHal={from:function(t){if(!i.get(o.JSON_HAL))throw n("JSON HAL adapter is not registered. From version 1.0.0 on, Traverson has no longer built-in support for application/hal+json. HAL support was moved to a separate, optional plug-in. See https://github.com/traverson/traverson-hal",r.UnsupportedMediaType);var e=new s;return e.from(t),e.setMediaType(o.JSON_HAL),e}},u.registerMediaType=i.register,u.mediaTypes=o,u.errors=r}).call(this,a("_process"))},{"./lib/builder":8,"./lib/errors":9,"./lib/media_type_registry":13,"./lib/media_types":14,_process:42,minilog:1}]},{},[52])(52)});